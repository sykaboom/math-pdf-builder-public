📐 Math Exam Editor v4.1 (Modular Architecture)
이 프로젝트는 전문가를 위한 웹 기반 수식 시험지 편집기입니다.

유지보수와 기능 확장을 위해 SSOT(Single Source of Truth) 원칙과 모듈형 아키텍처(Modular Architecture) 로 설계되었습니다.

AI(LLM)를 이용해 코드를 수정할 때, 전체 코드를 뒤질 필요 없이 **"수정하려는 목적"**에 맞는 파일 하나만 선택하면 됩니다.

🛠️ 상황별 수정 가이드 (Maintenance Guide)
"지금 무엇을 고치고 싶으신가요?"

아래의 상황 분류를 보고 해당하는 파일을 수정하십시오.

1. 화면에 보이는 것을 고치고 싶을 때 (View & UI)
📄 index.html (건물의 뼈대)
"새로운 버튼이나 팝업창을 추가해야 해요."

역할: 웹페이지의 HTML 구조를 정의합니다. 외부 라이브러리 로딩 순서도 여기서 관리합니다.

이럴 때 수정하세요:

사이드바에 'PDF 다운로드' 같은 새로운 버튼을 만들고 싶을 때.

화면 중앙에 새로운 안내 모달(팝업창) 구조를 추가할 때.

MathJax 외에 다른 외부 라이브러리(CDN) 를 가져와야 할 때.

주의: 단순 디자인 변경이나 기능 로직은 이곳이 아닙니다.

🎨 css/style.css (인테리어 및 디자인)
"버튼 색상을 바꾸거나, 여백을 조절하고 싶어요."

역할: 모든 시각적 스타일(색상, 폰트, 간격, 테두리)을 담당합니다.

이럴 때 수정하세요:

버튼의 색상, 크기, 마우스 오버 효과를 변경할 때.

시험지 본문의 줄 간격(line-height) 이나 폰트를 바꾸고 싶을 때.

인쇄 시(@media print) 특정 버튼을 숨기거나 여백을 조정할 때.

🖌️ js/renderer.js (화가)
"시험지 표 모양을 바꾸거나, 페이지가 넘어가는 기준을 고치고 싶어요."

역할: 데이터를 받아 실제 HTML(DOM)을 그리고, A4 용지 높이에 맞춰 레이아웃을 계산합니다.

이럴 때 수정하세요:

헤더(점수란, 결재란) 표의 HTML 구조(<table>)를 변경하고 싶을 때.

블록이 생성될 때 같이 붙는 작은 메뉴 버튼들(단 나누기 등) 의 위치를 옮길 때.

페이지 레이아웃 밸런싱(Rebalance) 로직(단 높이 계산)을 수정할 때.

수식을 입력했을 때 화면에 반영되는 타이밍(Sync)을 조절할 때.

2. 동작과 규칙을 바꾸고 싶을 때 (Logic & Behavior)
🧠 js/actions.js (두뇌 / 비즈니스 로직)
"삭제할 때 확인 창을 없애거나, 복제 규칙을 바꾸고 싶어요."

역할: 데이터(Blocks)를 추가, 삭제, 변경하는 순수한 규칙을 정의합니다. 화면을 어떻게 그릴지는 신경 쓰지 않습니다.

이럴 때 수정하세요:

블록 삭제 시 confirm 창 없이 바로 지우게 하고 싶을 때.

블록 추가 시 기본으로 들어가는 텍스트("내용 입력...")를 바꾸고 싶을 때.

블록 복제 시 내용은 복사하되 스타일(배경색 등)은 초기화하고 싶을 때.

붙여넣기한 텍스트를 파싱하는 규칙을 변경할 때.

🎮 js/events.js (신경망 / 입력 감지)
"단축키를 바꾸거나, 드래그 동작을 수정하고 싶어요."

역할: 사용자의 키보드, 마우스, 드래그 입력을 감지하여 적절한 로직(Actions)을 연결합니다.

이럴 때 수정하세요:

단축키를 변경하거나 추가할 때 (예: Ctrl+D → Alt+D).

이미지 드래그 앤 드롭 시 허용되는 파일 형식을 바꾸거나 감도를 조절할 때.

블록을 클릭했을 때 포커스(Focus) 가 잡히는 방식을 수정할 때.

스크롤 시 팝업 메뉴가 닫히는 동작 등을 제어할 때.

3. 데이터와 설정을 다루고 싶을 때 (Data & Config)
💾 js/state.js (기억 저장소)
"실행 취소 횟수를 늘리거나, 기본 제목을 바꾸고 싶어요."

역할: 시험지 데이터(docData)와 실행 취소(History), 현재 선택된 상태 등 모든 상태 값을 관리합니다.

이럴 때 수정하세요:

실행 취소(Undo) 가능한 최대 횟수(기본 30개)를 늘리고 싶을 때.

새 문서 생성 시 기본 제목/단원명을 변경하고 싶을 때.

전역적으로 공유해야 할 변수가 생겼을 때.

🔌 js/services.js (외부 기술 지원)
"파일 저장 방식이나 수식 렌더링 설정을 바꾸고 싶어요."

역할: MathJax 엔진 호출, 로컬 파일 시스템 저장, JSON 다운로드 등 기술적인 외부 연동을 담당합니다.

이럴 때 수정하세요:

MathJax 수식 폰트 설정을 디테일하게 튜닝하고 싶을 때.

파일 저장 시 날짜 포맷(YYYYMMDD)을 파일명에 넣고 싶을 때.

로컬 이미지 저장 로직을 변경하고 싶을 때.

⚙️ js/config.js (초기 설정)
역할: MathJax 라이브러리가 로드되기 전, 수식 인식 기호($, $$) 등을 정의합니다.

이럴 때 수정하세요: 수식 델리미터(구분자)를 변경해야 할 때.

4. 기타 도구
🔧 js/utils.js (공구함)
단순 반복 작업(Debounce, HTML 태그 제거 등)을 위한 헬퍼 함수들이 모여 있습니다.

🚀 js/main.js (지휘자)
앱이 시작될 때(DOMContentLoaded) 모든 모듈을 연결하고 초기화하는 진입점입니다.

⚡ 개발 및 실행 팁 (Important)
1. 수정 사항이 반영되지 않을 때 (캐시 문제)
코드를 수정하고 GitHub Pages 등에 올렸는데도 예전 버전으로 보인다면 브라우저 캐시 때문입니다.

강력 새로고침 단축키:

Windows: Ctrl + Shift + R

Mac: Cmd + Shift + R

2. 브라우저 보안 정책 (CORS)
이 프로젝트는 ES Modules를 사용하므로 로컬 파일(file://)을 직접 더블 클릭하면 작동하지 않을 수 있습니다.

권장: VS Code의 Live Server 확장 프로그램을 사용하거나, GitHub Pages에 올려서 실행하세요.